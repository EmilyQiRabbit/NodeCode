{"version":3,"sources":["webpack:///3.731400f6b3d6afa30f3d.js","webpack:///./client/pages/user/components/index.js","webpack:///./client/pages/user/action.js"],"names":["webpackJsonp","1321","module","exports","__webpack_require__","_interopRequireDefault","obj","__esModule","default","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","defineProperty","Users","_table","_table2","_menu","_menu2","_popconfirm","_popconfirm2","_message","_message2","_createClass","defineProperties","target","props","i","length","descriptor","key","protoProps","staticProps","_react","_react2","_propTypes","_propTypes2","_reactRedux","_redux","_action","_action2","_action3","_action4","_index","_Component","this","_this","getPrototypeOf","getUserList","page","_this$props","appActions","userActions","loading","then","getList","catch","err","error","msg","handleUserFroze","formdata","index","postFrozeUser","_id","user_status","data","text","success","handleUserRole","postRoleUser","user_role","handleUserDelete","postDeleteUser","handleTableChange","pagination","current","columns","title","width","dataIndex","render","dateToString","record","span","color","createElement","style","statusText","statusTextTip","roleText","href","onClick","className","onConfirm","user","list","get","toArray","toJS","selectedKeys","mode","Item","bordered","rowKey","dataSource","onChange","Component","propTypes","object","connect","state","dispatch","bindActionCreators","1346","_callApi","_callApi2","requestUrl","res","Promise","resolve","type","userlist","results","post","JSON","stringify","info"],"mappings":"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","file":"3.731400f6b3d6afa30f3d.js","sourcesContent":["webpackJsonp([3],{\n\n/***/ 1321:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Users = undefined;\n\nvar _css = __webpack_require__(154);\n\nvar _table = __webpack_require__(153);\n\nvar _table2 = _interopRequireDefault(_table);\n\nvar _css2 = __webpack_require__(115);\n\nvar _menu = __webpack_require__(92);\n\nvar _menu2 = _interopRequireDefault(_menu);\n\nvar _css3 = __webpack_require__(156);\n\nvar _popconfirm = __webpack_require__(155);\n\nvar _popconfirm2 = _interopRequireDefault(_popconfirm);\n\nvar _css4 = __webpack_require__(114);\n\nvar _message = __webpack_require__(113);\n\nvar _message2 = _interopRequireDefault(_message);\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(0);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = __webpack_require__(5);\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _reactRedux = __webpack_require__(48);\n\nvar _redux = __webpack_require__(59);\n\nvar _action = __webpack_require__(1346);\n\nvar _action2 = _interopRequireDefault(_action);\n\nvar _action3 = __webpack_require__(151);\n\nvar _action4 = _interopRequireDefault(_action3);\n\nvar _index = __webpack_require__(255);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Users = exports.Users = function (_Component) {\n  _inherits(Users, _Component);\n\n  function Users(props) {\n    _classCallCheck(this, Users);\n\n    /**\n     * table??????\n     * @type {*[]}\n     */\n    var _this = _possibleConstructorReturn(this, (Users.__proto__ || Object.getPrototypeOf(Users)).call(this, props));\n\n    _this.getUserList = function (page) {\n      var _this$props = _this.props,\n          appActions = _this$props.appActions,\n          userActions = _this$props.userActions;\n\n      appActions.loading(true).then(function () {\n        return userActions.getList({ page: page });\n      }).then(function () {\n        appActions.loading(false);\n      }).catch(function (err) {\n        _message2.default.error(err.msg);\n      });\n    };\n\n    _this.handleUserFroze = function (formdata, index) {\n      _this.props.userActions.postFrozeUser({\n        index: index,\n        _id: formdata._id,\n        user_status: formdata.user_status === 1 ? 0 : 1\n      }).then(function (data) {\n        var text = formdata.user_status === 0 ? '??????' : '??????';\n        _message2.default.success(text + '\\u6210\\u529F');\n      }).catch(function (err) {\n        _message2.default.error(err.msg);\n      });\n    };\n\n    _this.handleUserRole = function (formdata, index) {\n      _this.props.userActions.postRoleUser({\n        index: index,\n        _id: formdata._id,\n        user_role: formdata.user_role === 999 ? 1 : 999\n      }).then(function (data) {\n        _message2.default.success('??????????????????');\n      }).catch(function (err) {\n        _message2.default.error(err.msg);\n      });\n    };\n\n    _this.handleUserDelete = function (formdata, index) {\n      _this.props.userActions.postDeleteUser({\n        index: index,\n        _id: formdata._id\n      }).then(function (data) {\n        _message2.default.success('????????????');\n      }).catch(function (err) {\n        _message2.default.error(err.msg);\n      });\n    };\n\n    _this.handleTableChange = function (pagination) {\n      _this.getUserList(pagination.current);\n    };\n\n    _this.columns = [{\n      title: '??????',\n      width: 150,\n      dataIndex: 'user_realname',\n      key: 'realname'\n    }, {\n      title: '??????',\n      width: 150,\n      dataIndex: 'email',\n      key: 'email'\n    }, {\n      title: '????????????',\n      width: 200,\n      dataIndex: 'createTime',\n      key: 'register',\n      render: function render(text) {\n        return (0, _index.dateToString)(text);\n      }\n    }, {\n      title: '??????',\n      dataIndex: 'user_status',\n      key: 'status',\n      render: function render(text, record) {\n        var span = {\n          text: '??????',\n          color: '#093'\n        };\n\n        if (text === 0) {\n          span.text = '??????';\n          span.color = '#ff0000';\n        }\n\n        return _react2.default.createElement(\n          'span',\n          { style: { color: span.color } },\n          span.text\n        );\n      }\n    }, {\n      title: '??????',\n      dataIndex: 'user_role',\n      key: 'role',\n      render: function render(text, record) {\n        switch (text) {\n          case 999:\n            return '?????????';\n          default:\n            return '????????????';\n        }\n      }\n    }, {\n      title: '??????',\n      render: function render(text, record, index) {\n        var statusText = record.user_status === 0 ? '??????' : '??????',\n            statusTextTip = '\\u786E\\u5B9A' + statusText + '\\u6B64\\u8D26\\u53F7\\u4E48?';\n        var roleText = record.user_role === 999 ? '???????????????' : '???????????????';\n        var self = _this;\n\n        function handleUserRole() {\n          self.handleUserRole(record, index);\n        }\n        function handleUserFroze() {\n          self.handleUserFroze(record, index);\n        }\n        function handleUserDelete() {\n          self.handleUserDelete(record, index);\n        }\n\n        return _react2.default.createElement(\n          'span',\n          null,\n          _react2.default.createElement(\n            'a',\n            { href: '#', onClick: handleUserRole },\n            roleText\n          ),\n          _react2.default.createElement('span', { className: 'ant-divider' }),\n          _react2.default.createElement(\n            _popconfirm2.default,\n            { title: statusTextTip, onConfirm: handleUserFroze },\n            _react2.default.createElement(\n              'a',\n              { href: '#' },\n              statusText\n            )\n          ),\n          _react2.default.createElement('span', { className: 'ant-divider' }),\n          _react2.default.createElement(\n            _popconfirm2.default,\n            { title: '\\u786E\\u5B9A\\u5220\\u9664\\u6B64\\u8D26\\u53F7\\u4E48?', onConfirm: handleUserDelete },\n            _react2.default.createElement(\n              'a',\n              { href: '#' },\n              '\\u5220\\u9664'\n            )\n          )\n        );\n      }\n    }];\n    return _this;\n  }\n\n  _createClass(Users, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      this.getUserList(1);\n    }\n\n    /**\n     * ??????page??????????????????\n     * @param page\n     */\n\n\n    /**\n     * ????????????/????????????\n     * @param _id\n     */\n\n\n    /**\n     * ????????????/????????????\n     * @param _id\n     */\n\n\n    /**\n     * ??????????????????\n     * @param _id\n     */\n\n\n    /**\n     * ????????????\n     * @param page\n     */\n\n  }, {\n    key: 'render',\n    value: function render() {\n      var user = this.props.user;\n\n      var list = user.get('userlist') && user.get('userlist').toArray();\n      var pagination = user.get('pagination') && user.get('pagination').toJS();\n\n      return _react2.default.createElement(\n        'div',\n        null,\n        _react2.default.createElement(\n          _menu2.default,\n          { selectedKeys: ['list'],\n            mode: 'horizontal' },\n          _react2.default.createElement(\n            _menu2.default.Item,\n            { key: 'list' },\n            '\\u7528\\u6237\\u5217\\u8868'\n          )\n        ),\n        _react2.default.createElement(_table2.default, {\n          bordered: true,\n          rowKey: '_id',\n          columns: this.columns,\n          dataSource: list,\n          className: 'mt20',\n          pagination: pagination,\n          onChange: this.handleTableChange\n        })\n      );\n    }\n  }]);\n\n  return Users;\n}(_react.Component);\n\nUsers.propTypes = {\n  user: _propTypes2.default.object,\n  appActions: _propTypes2.default.object,\n  userActions: _propTypes2.default.object\n};\nexports.default = (0, _reactRedux.connect)(function (state) {\n  return {\n    user: state.get('user')\n  };\n}, function (dispatch) {\n  return {\n    userActions: (0, _redux.bindActionCreators)(_action2.default, dispatch),\n    appActions: (0, _redux.bindActionCreators)(_action4.default, dispatch)\n  };\n})(Users);\n\n/***/ }),\n\n/***/ 1346:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _callApi = __webpack_require__(152);\n\nvar _callApi2 = _interopRequireDefault(_callApi);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * ??????????????????\n * @returns {function()}\n */\nvar getList = function getList(formdata) {\n  return function (dispatch) {\n    var requestUrl = '/api/user/list?page=' + formdata.page;\n    return _callApi2.default.get(requestUrl).then(function (res) {\n      return Promise.resolve(dispatch({\n        type: 'USER_LIST',\n        pagination: res.data.pagination,\n        userlist: res.data.results\n      }));\n    });\n  };\n};\n\n/**\n * ??????????????????\n * @param formdata\n * @returns {function()}\n */\nvar postDeleteUser = function postDeleteUser(formdata) {\n  return function (dispatch) {\n    var requestUrl = '/api/user/delete';\n    return _callApi2.default.post(requestUrl, JSON.stringify(formdata)).then(function (res) {\n      return Promise.resolve(dispatch({\n        type: 'USER_DELETE',\n        index: formdata.index\n      }));\n    });\n  };\n};\n\n/**\n * ????????????\n * @param formdata\n * @returns {function()}\n */\nvar postRoleUser = function postRoleUser(formdata) {\n  return function (dispatch) {\n    var requestUrl = '/api/user/role';\n    return _callApi2.default.post(requestUrl, JSON.stringify(formdata)).then(function (res) {\n      return Promise.resolve(dispatch({\n        type: 'USER_EDIT',\n        index: formdata.index,\n        info: res.data\n      }));\n    });\n  };\n};\n\n/**\n * ??????/??????,??????\n * @param formdata\n * @returns {function()}\n */\nvar postFrozeUser = function postFrozeUser(formdata) {\n  return function (dispatch) {\n    var requestUrl = '/api/user/froze';\n    return _callApi2.default.post(requestUrl, JSON.stringify(formdata)).then(function (res) {\n      return Promise.resolve(dispatch({\n        type: 'USER_EDIT',\n        index: formdata.index,\n        info: res.data\n      }));\n    });\n  };\n};\n\nexports.default = {\n  getList: getList,\n  postDeleteUser: postDeleteUser,\n  postFrozeUser: postFrozeUser,\n  postRoleUser: postRoleUser\n};\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// 3.731400f6b3d6afa30f3d.js","import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport {connect} from 'react-redux';\nimport {bindActionCreators} from 'redux';\n\nimport { Table, Menu, Popconfirm, message, Button, Icon } from 'antd';\n\n\nimport userActions from '../action'\nimport appActions from '../../app/action'\n\nimport {dateToString} from '../../../utils/index';\n\nexport class Users extends Component {\n\n  static propTypes = {\n    user: PropTypes.object,\n    appActions: PropTypes.object,\n    userActions: PropTypes.object\n  }\n\n  constructor (props) {\n    super(props);\n\n    /**\n     * table??????\n     * @type {*[]}\n     */\n    this.columns = [{\n      title: '??????',\n      width: 150,\n      dataIndex: 'user_realname',\n      key: 'realname',\n    }, {\n      title: '??????',\n      width: 150,\n      dataIndex: 'email',\n      key: 'email',\n    }, {\n      title: '????????????',\n      width: 200,\n      dataIndex: 'user_registered',\n      key: 'register',\n      render: (text) => {\n        return dateToString(text);\n      }\n    }, {\n      title: '??????',\n      dataIndex: 'user_status',\n      key: 'status',\n      render: (text, record) => {\n        const span = {\n            text: '??????',\n            color: '#093'\n          };\n\n        if (text === 0) {\n          span.text = '??????';\n          span.color = '#ff0000';\n        }\n\n        return <span style={{color: span.color}}>{span.text}</span>;\n      }\n    }, {\n      title: '??????',\n      dataIndex: 'user_role',\n      key: 'role',\n      render: (text, record) => {\n        switch (text) {\n          case 999:\n            return '?????????';\n          default:\n            return '????????????';\n        }\n      }\n    }, {\n      title: '??????',\n      render: (text, record, index) => {\n        const statusText = record.user_status === 0 ? '??????' : '??????',\n          statusTextTip = `??????${statusText}?????????????`;\n        const roleText = record.user_role === 999 ? '???????????????' : '???????????????';\n        const self = this;\n\n        function handleUserRole () {\n          self.handleUserRole(record, index)\n        }\n        function handleUserFroze () {\n          self.handleUserFroze(record, index)\n        }\n        function handleUserDelete () {\n          self.handleUserDelete(record, index)\n        }\n\n        return (\n          <span>\n            <a href=\"#\" onClick={handleUserRole}>{roleText}</a>\n            <span className=\"ant-divider\" />\n            <Popconfirm title={statusTextTip} onConfirm={handleUserFroze} >\n              <a href=\"#\">{statusText}</a>\n            </Popconfirm>\n            <span className=\"ant-divider\" />\n\n            <Popconfirm title=\"?????????????????????????\" onConfirm={handleUserDelete} >\n              <a href=\"#\">??????</a>\n            </Popconfirm>\n          </span>\n        )\n      },\n    }];\n  }\n\n  componentDidMount () {\n    this.getUserList(1);\n  }\n\n  /**\n   * ??????page??????????????????\n   * @param page\n   */\n  getUserList = (page) => {\n    const { appActions, userActions } =  this.props;\n    appActions.loading(true).then(() => {\n      return userActions.getList({page})\n    }).then(() => {\n      appActions.loading(false)\n    }).catch(err => {\n      message.error(err.msg);\n    })\n  }\n\n  /**\n   * ????????????/????????????\n   * @param _id\n   */\n  handleUserFroze = (formdata, index) => {\n    this.props.userActions.postFrozeUser({\n      index,\n      _id: formdata._id,\n      user_status: formdata.user_status === 1 ? 0 : 1\n    }).then(data => {\n      const text = formdata.user_status === 0 ? '??????' : '??????';\n      message.success(`${text}??????`);\n    }).catch(err => {\n      message.error(err.msg);\n    })\n  }\n\n  /**\n   * ????????????/????????????\n   * @param _id\n   */\n  handleUserRole = (formdata, index) => {\n    this.props.userActions.postRoleUser({\n      index,\n      _id: formdata._id,\n      user_role: formdata.user_role === 999 ? 1 : 999\n    }).then(data => {\n      message.success('??????????????????');\n    }).catch(err => {\n      message.error(err.msg);\n    })\n  }\n  \n\n  /**\n   * ??????????????????\n   * @param _id\n   */\n  handleUserDelete = (formdata, index) => {\n    this.props.userActions.postDeleteUser({\n      index,\n      _id: formdata._id,\n    }).then(data => {\n      message.success('????????????');\n    }).catch(err => {\n      message.error(err.msg);\n    })\n  }\n\n  /**\n   * ????????????\n   * @param page\n   */\n  handleTableChange = (pagination) => {\n    this.getUserList(pagination.current);\n  }\n\n\n  render() {\n\n    const {user} = this.props;\n    const list = user.get('userlist') && user.get('userlist').toArray();\n    const pagination = user.get('pagination') && user.get('pagination').toJS();\n\n    return (\n      <div>\n        <Menu selectedKeys={['list']}\n              mode=\"horizontal\">\n          <Menu.Item key=\"list\">\n            ????????????\n          </Menu.Item>\n        </Menu>\n\n        <Table\n          bordered\n          rowKey=\"_id\"\n          columns={this.columns}\n          dataSource={list}\n          className=\"mt20\"\n          pagination={pagination}\n          onChange={this.handleTableChange}\n        />\n      </div>\n    )\n  }\n\n}\n\nexport default connect((state) => {\n  return  {\n    user: state.get('user')\n  }\n}, dispatch => {\n  return {\n    userActions: bindActionCreators(userActions, dispatch),\n    appActions: bindActionCreators(appActions, dispatch)\n  }\n})(Users);\n\n\n\n// WEBPACK FOOTER //\n// ./client/pages/user/components/index.js","import callApi from '../../utils/callApi';\n\n/**\n * ??????????????????\n * @returns {function()}\n */\nconst getList = (formdata) => {\n  return (dispatch) => {\n    const requestUrl = `/api/user/list?page=${formdata.page}`;\n    return callApi.get(requestUrl).then(res => {\n      return Promise.resolve(dispatch({\n        type: 'USER_LIST',\n        pagination: res.data.pagination,\n        userlist: res.data.results\n      }))\n    });\n  }\n}\n\n/**\n * ??????????????????\n * @param formdata\n * @returns {function()}\n */\nconst postDeleteUser = (formdata) => {\n  return (dispatch) => {\n    const requestUrl = '/api/user/delete';\n    return callApi.post(requestUrl, JSON.stringify(formdata)).then(res => {\n      return Promise.resolve(dispatch({\n        type: 'USER_DELETE',\n        index: formdata.index\n      }));\n    });\n\n  }\n}\n\n/**\n * ????????????\n * @param formdata\n * @returns {function()}\n */\nconst postRoleUser = (formdata) => {\n  return (dispatch) => {\n    const requestUrl = '/api/user/role';\n    return callApi.post(requestUrl, JSON.stringify(formdata)).then(res => {\n      return Promise.resolve(dispatch({\n        type: 'USER_EDIT',\n        index: formdata.index,\n        info: res.data\n      }));\n    });\n  }\n}\n\n/**\n * ??????/??????,??????\n * @param formdata\n * @returns {function()}\n */\nconst postFrozeUser = (formdata) => {\n  return (dispatch) => {\n    const requestUrl = '/api/user/froze';\n    return callApi.post(requestUrl, JSON.stringify(formdata)).then(res => {\n      return Promise.resolve(dispatch({\n        type: 'USER_EDIT',\n        index: formdata.index,\n        info: res.data\n      }));\n    });\n  }\n}\n\nexport default {\n  getList,\n  postDeleteUser,\n  postFrozeUser,\n  postRoleUser\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/pages/user/action.js"],"sourceRoot":""}