{"version":3,"sources":["webpack:///4.b8cd79f911d12bdf1ed2.js","webpack:///./client/pages/posts/components/index.js","webpack:///./client/pages/posts/action.js"],"names":["webpackJsonp","1319","module","exports","__webpack_require__","_interopRequireDefault","obj","__esModule","default","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","defineProperty","Post","_table","_table2","_menu","_menu2","_message","_message2","_tag","_tag2","_createClass","defineProperties","target","props","i","length","descriptor","key","protoProps","staticProps","_react","_react2","_propTypes","_propTypes2","_reactRedux","_redux","_action","_action2","_action3","_action4","_index","_Component","_ref","_temp","_this","_ret","this","_len","arguments","args","Array","_key","getPrototypeOf","apply","concat","handleMenuClick","e","getPostList","page","type","handleTableChange","pagination","post","get","current","title","dataIndex","render","text","record","createElement","href","_id","doc","user_realname","color","term_name","width","statusObj","-1","content","1","0","style","dateToString","index","params","_props","appActions","postActions","loading","then","getList","catch","err","error","msg","list","toArray","toJS","Columns","getCloums","onClick","selectedKeys","mode","Item","marginLeft","bordered","rowKey","columns","dataSource","className","onChange","Component","propTypes","object","connect","state","dispatch","bindActionCreators","1344","_callApi","_callApi2","formdata","res","Promise","resolve","posttype","data","postlist","results"],"mappings":"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","file":"4.b8cd79f911d12bdf1ed2.js","sourcesContent":["webpackJsonp([4],{\n\n/***/ 1319:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Post = undefined;\n\nvar _css = __webpack_require__(154);\n\nvar _table = __webpack_require__(153);\n\nvar _table2 = _interopRequireDefault(_table);\n\nvar _css2 = __webpack_require__(115);\n\nvar _menu = __webpack_require__(92);\n\nvar _menu2 = _interopRequireDefault(_menu);\n\nvar _css3 = __webpack_require__(114);\n\nvar _message = __webpack_require__(113);\n\nvar _message2 = _interopRequireDefault(_message);\n\nvar _css4 = __webpack_require__(257);\n\nvar _tag = __webpack_require__(256);\n\nvar _tag2 = _interopRequireDefault(_tag);\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(0);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = __webpack_require__(5);\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _reactRedux = __webpack_require__(48);\n\nvar _redux = __webpack_require__(59);\n\nvar _reactRouter = __webpack_require__(70);\n\nvar _action = __webpack_require__(1344);\n\nvar _action2 = _interopRequireDefault(_action);\n\nvar _action3 = __webpack_require__(151);\n\nvar _action4 = _interopRequireDefault(_action3);\n\nvar _index = __webpack_require__(255);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Post = exports.Post = function (_Component) {\n  _inherits(Post, _Component);\n\n  function Post() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, Post);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = Post.__proto__ || Object.getPrototypeOf(Post)).call.apply(_ref, [this].concat(args))), _this), _this.handleMenuClick = function (e) {\n      _this.getPostList({\n        page: 1,\n        type: e.key\n      });\n    }, _this.handleTableChange = function (pagination) {\n\n      var type = _this.props.post.get('posttype');\n      _this.getPostList({\n        page: pagination.current,\n        type: type\n      });\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  _createClass(Post, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      var type = this.props.post.get('posttype');\n      this.getPostList({\n        page: 1,\n        type: type\n      });\n    }\n  }, {\n    key: 'getCloums',\n    value: function getCloums() {\n\n      var type = this.props.post.get('posttype') || 'post';\n      /**\n       * table头部\n       * @type {*[]}\n       */\n      return [{\n        title: '页面标题',\n        dataIndex: 'post_title',\n        key: 'title',\n        render: function render(text, record) {\n          return _react2.default.createElement(\n            'a',\n            { href: '/post/' + record._id + '.html', target: '_blank' },\n            text\n          );\n        }\n      }, {\n        title: '发布人',\n        dataIndex: 'post_author',\n        key: 'author',\n        render: function render(doc) {\n          if (doc) {\n            return _react2.default.createElement(\n              'span',\n              null,\n              doc.user_realname\n            );\n          }\n          return _react2.default.createElement(\n            'span',\n            null,\n            '\\u672A\\u627E\\u5230'\n          );\n        }\n      }, {\n        title: '当前分类',\n        dataIndex: 'post_term',\n        key: 'term',\n        render: function render(doc) {\n          return _react2.default.createElement(\n            _tag2.default,\n            { color: '#87d068' },\n            doc.term_name\n          );\n        }\n      }, {\n        title: '当前状态',\n        width: 90,\n        dataIndex: 'post_status',\n        key: 'status',\n        render: function render(text) {\n          var statusObj = {\n            '-1': {\n              color: '#f50',\n              content: '已删除'\n            },\n            1: {\n              color: '#87d068',\n              content: '已发布'\n            },\n            0: {\n              color: '#108ee9',\n              content: '草稿'\n            }\n          };\n\n          return _react2.default.createElement(\n            'span',\n            { style: { color: statusObj[text].color } },\n            statusObj[text].content\n          );\n        }\n      }, {\n        title: '发布时间',\n        dataIndex: 'post_date',\n        key: 'date',\n        render: function render(text) {\n          return (0, _index.dateToString)(text);\n        }\n      }, {\n        title: '修改时间',\n        dataIndex: 'post_modified',\n        key: 'modify',\n        render: function render(text) {\n          return (0, _index.dateToString)(text);\n        }\n      }, {\n        title: '操作',\n        key: 'handle',\n        render: function render(text, record, index) {\n          return _react2.default.createElement(\n            'span',\n            null,\n            _react2.default.createElement(\n              'a',\n              { href: '/post/' + record._id + '.html', target: '_blank' },\n              '\\u67E5\\u770B'\n            )\n          );\n        }\n      }];\n    }\n\n    /**\n     * 获取文章列表\n     */\n\n  }, {\n    key: 'getPostList',\n    value: function getPostList(params) {\n      var _props = this.props,\n          appActions = _props.appActions,\n          postActions = _props.postActions;\n\n\n      appActions.loading(true).then(function () {\n        return postActions.getList(params);\n      }).then(function () {\n        appActions.loading(false);\n      }).catch(function (err) {\n        _message2.default.error(err.msg);\n      });\n    }\n\n    /**\n     * 菜单点击操作\n     * @param e\n     */\n\n\n    /**\n     * 分页改变\n     * @param page\n     */\n\n  }, {\n    key: 'render',\n    value: function render() {\n      var post = this.props.post;\n\n      var type = post.get('posttype') || 'post';\n      var list = post.get('postlist') && post.get('postlist').toArray();\n      var pagination = post.get('pagination') && post.get('pagination').toJS();\n      var Columns = this.getCloums();\n      return _react2.default.createElement(\n        'div',\n        null,\n        _react2.default.createElement(\n          _menu2.default,\n          { onClick: this.handleMenuClick,\n            selectedKeys: [type],\n            mode: 'horizontal' },\n          _react2.default.createElement(\n            _menu2.default.Item,\n            { key: 'post' },\n            '\\u6587\\u7AE0\\u5217\\u8868'\n          ),\n          _react2.default.createElement(\n            _menu2.default.Item,\n            { key: 'trash', style: { marginLeft: 20 } },\n            '\\u56DE\\u6536\\u7AD9\\u6587\\u7AE0'\n          )\n        ),\n        _react2.default.createElement(_table2.default, {\n          bordered: true,\n          rowKey: '_id',\n          columns: Columns,\n          dataSource: list,\n          className: 'mt20',\n          pagination: pagination,\n          onChange: this.handleTableChange\n        })\n      );\n    }\n  }]);\n\n  return Post;\n}(_react.Component);\n\nPost.propTypes = {\n  post: _propTypes2.default.object,\n  appActions: _propTypes2.default.object,\n  postActions: _propTypes2.default.object\n};\nexports.default = (0, _reactRedux.connect)(function (state) {\n  return {\n    post: state.get('post')\n  };\n}, function (dispatch) {\n  return {\n    postActions: (0, _redux.bindActionCreators)(_action2.default, dispatch),\n    appActions: (0, _redux.bindActionCreators)(_action4.default, dispatch)\n  };\n})(Post);\n\n/***/ }),\n\n/***/ 1344:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _callApi = __webpack_require__(152);\n\nvar _callApi2 = _interopRequireDefault(_callApi);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * 获取文章列表\n * @returns {function()}\n */\nvar getList = function getList(formdata) {\n  return function (dispatch) {\n    var requestUrl = '/api/posts/list';\n    return _callApi2.default.get(requestUrl, formdata).then(function (res) {\n      return Promise.resolve(dispatch({\n        type: 'post_list',\n        posttype: formdata.type,\n        pagination: res.data.pagination,\n        postlist: res.data.results\n      }));\n    });\n  };\n};\n\nexports.default = {\n  getList: getList\n};\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// 4.b8cd79f911d12bdf1ed2.js","import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport {connect} from 'react-redux';\nimport {bindActionCreators} from 'redux';\nimport { Link } from 'react-router'\n\nimport { Table, Menu, Popconfirm, message, Tag, Button, Modal, Icon } from 'antd';\n\n\nimport postActions from '../action'\nimport appActions from '../../app/action'\n\nimport {dateToString} from '../../../utils/index';\n\nexport class Post extends Component {\n\n  static propTypes = {\n    post: PropTypes.object,\n    appActions: PropTypes.object,\n    postActions: PropTypes.object\n  }\n\n  componentDidMount () {\n    const type = this.props.post.get('posttype');\n    this.getPostList({\n      page: 1,\n      type\n    });\n  }\n\n  getCloums () {\n\n    const type = this.props.post.get('posttype') || 'post';\n    /**\n     * table头部\n     * @type {*[]}\n     */\n    return [{\n      title: '页面标题',\n      dataIndex: 'post_title',\n      key: 'title',\n      render: (text, record) => {\n        return (\n          <a href={`/post/${record._id}.html`} target=\"_blank\">{text}</a>\n        )\n      }\n    }, {\n      title: '发布人',\n      dataIndex: 'post_author',\n      key: 'author',\n      render: (doc) => {\n        if (doc) {\n          return (\n            <span>{doc.user_realname}</span>\n          )\n        }\n          return (\n            <span>未找到</span>\n          )\n        \n      }\n    }, {\n      title: '当前分类',\n      dataIndex: 'post_term',\n      key: 'term',\n      render: (doc) => {\n        return (\n          <Tag color=\"#87d068\">{doc.term_name}</Tag>\n        )\n      }\n    }, {\n      title: '当前状态',\n      width: 90,\n      dataIndex: 'post_status',\n      key: 'status',\n      render: (text) => {\n        const statusObj = {\n          '-1': {\n            color: '#f50',\n            content: '已删除'\n          },\n          1: {\n            color: '#87d068',\n            content: '已发布'\n          },\n          0: {\n            color: '#108ee9',\n            content: '草稿'\n          }\n        };\n\n        return (\n          <span style={{color: statusObj[text].color}}>{statusObj[text].content}</span>\n        );\n      }\n    }, {\n      title: '发布时间',\n      dataIndex: 'post_date',\n      key: 'date',\n      render: (text) => {\n        return dateToString(text);\n      }\n    }, {\n      title: '修改时间',\n      dataIndex: 'post_modified',\n      key: 'modify',\n      render: (text) => {\n        return dateToString(text);\n      }\n    }, {\n      title: '操作',\n      key: 'handle',\n      render: (text, record, index) => {\n        return (\n          <span>\n            <a href={`/post/${record._id}.html`} target=\"_blank\">查看</a>\n          </span>\n        )\n      },\n    }];\n  }\n\n  /**\n   * 获取文章列表\n   */\n  getPostList (params) {\n    const { appActions, postActions } =  this.props;\n\n    appActions.loading(true).then(() => {\n      return postActions.getList(params)\n    }).then(() => {\n      appActions.loading(false);\n    }).catch(err => {\n      message.error(err.msg);\n    })\n  }\n\n  /**\n   * 菜单点击操作\n   * @param e\n   */\n  handleMenuClick = (e) => {\n    this.getPostList({\n      page: 1,\n      type: e.key\n    });\n  }\n\n  /**\n   * 分页改变\n   * @param page\n   */\n  handleTableChange = (pagination) => {\n\n    const type = this.props.post.get('posttype');\n    this.getPostList({\n      page: pagination.current,\n      type\n    });\n  }\n\n\n  render() {\n    const {post} = this.props;\n    const type = post.get('posttype') || 'post';\n    const list = post.get('postlist') && post.get('postlist').toArray();\n    const pagination = post.get('pagination') && post.get('pagination').toJS();\n    const Columns = this.getCloums();\n    return (\n      <div>\n        <Menu onClick={this.handleMenuClick}\n              selectedKeys={[type]}\n              mode=\"horizontal\">\n          <Menu.Item key=\"post\">\n            文章列表\n          </Menu.Item>\n          <Menu.Item key=\"trash\" style={{marginLeft: 20}}>\n            回收站文章\n          </Menu.Item>\n        </Menu>\n\n        <Table\n          bordered\n          rowKey=\"_id\"\n          columns={Columns}\n          dataSource={list}\n          className=\"mt20\"\n          pagination={pagination}\n          onChange={this.handleTableChange}\n        />\n      </div>\n    )\n    \n  }\n\n}\n\nexport default connect((state) => {\n  return  {\n    post: state.get('post')\n  }\n}, dispatch => {\n  return {\n    postActions: bindActionCreators(postActions, dispatch),\n    appActions: bindActionCreators(appActions, dispatch)\n  }\n})(Post);\n\n\n\n// WEBPACK FOOTER //\n// ./client/pages/posts/components/index.js","import callApi from '../../utils/callApi';\n\n/**\n * 获取文章列表\n * @returns {function()}\n */\nconst getList = (formdata) => {\n  return (dispatch) => {\n    const requestUrl = '/api/posts/list';\n    return callApi.get(requestUrl, formdata).then(res => {\n      return Promise.resolve(dispatch({\n        type: 'post_list',\n        posttype: formdata.type,\n        pagination: res.data.pagination,\n        postlist: res.data.results\n      }))\n    });\n  }\n}\n\nexport default {\n  getList\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/pages/posts/action.js"],"sourceRoot":""}